<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JACK AI - BY T·∫§N KHANG</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary-gradient: linear-gradient(135deg, #2563eb 0%, #7c3aed 100%);
            --primary-color: #2563eb;
            --secondary-color: #7c3aed;
            --dark-bg: #0f172a;
            --darker-bg: #020617;
            --light-bg: #f8fafc;
            --white: #ffffff;
            --shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        body {
            background: linear-gradient(135deg, #2563eb 0%, #7c3aed 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: var(--transition);
            position: relative;
        }

        body.dark-mode {
            background: linear-gradient(135deg, #0f172a 0%, #020617 100%);
        }

        /* Weather and Windows Activation Bar */
        .top-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 0.5rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9rem;
            z-index: 1000;
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .weather-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .weather-info i {
            font-size: 1.2rem;
        }

        .activate-windows {
            color: #ffd700;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        /* Key Container Styles */
        .key-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 2.5rem;
            border-radius: 40px;
            box-shadow: var(--shadow);
            width: 90%;
            max-width: 450px;
            text-align: center;
            animation: slideUp 0.5s ease;
            border: 1px solid rgba(255, 255, 255, 0.3);
            margin-top: 60px;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        body.dark-mode .key-container {
            background: rgba(30, 41, 59, 0.95);
            border-color: rgba(255, 255, 255, 0.1);
        }

        .logo-container {
            position: relative;
            width: 120px;
            height: 120px;
            margin: 0 auto 1rem;
            cursor: pointer;
        }

        .logo {
            width: 100%;
            height: 100%;
            background: var(--primary-gradient);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            font-weight: bold;
            color: white;
            box-shadow: 0 20px 30px -10px rgba(37, 99, 235, 0.5);
            transition: var(--transition);
            overflow: hidden;
            border: 4px solid white;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .key-container h1 {
            font-size: 2.2rem;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.2rem;
        }

        .key-container h2 {
            color: #64748b;
            font-size: 1rem;
            margin-bottom: 2rem;
        }

        .input-group {
            margin: 1.5rem 0;
        }

        .input-group input {
            width: 100%;
            padding: 1rem 1.5rem;
            border: 2px solid #e2e8f0;
            border-radius: 50px;
            font-size: 1rem;
            transition: var(--transition);
            background: white;
        }

        body.dark-mode .input-group input {
            background: #1e293b;
            border-color: #334155;
            color: white;
        }

        .input-group input:focus {
            outline: none;
            border-color: #2563eb;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.2);
        }

        .btn {
            background: var(--primary-gradient);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            width: 100%;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 10px 20px -5px rgba(37, 99, 235, 0.4);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 20px 30px -5px rgba(37, 99, 235, 0.6);
        }

        .demo-text {
            margin: 1.5rem 0;
            padding: 0.8rem;
            background: linear-gradient(135deg, #f8fafc, #f1f5f9);
            border-radius: 20px;
            color: #475569;
            font-size: 0.9rem;
        }

        /* Main Container */
        .main-container {
            width: 100%;
            height: 100vh;
            display: none;
            background: #f8fafc;
            padding-top: 60px;
        }

        body.dark-mode .main-container {
            background: #0f172a;
        }

        .cover-image {
            width: 100%;
            height: 150px;
            background: var(--primary-gradient);
            position: relative;
            transition: var(--transition);
        }

        .change-cover-btn {
            position: absolute;
            bottom: 1rem;
            right: 1rem;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 30px;
            cursor: pointer;
            font-size: 0.8rem;
            display: none;
            align-items: center;
            gap: 0.5rem;
            z-index: 10;
        }

        .change-cover-btn.visible {
            display: flex;
        }

        .chat-interface {
            display: flex;
            height: calc(100% - 150px);
        }

        /* Sidebar Styles */
        .sidebar {
            width: 280px;
            background: linear-gradient(180deg, #1e293b 0%, #0f172a 100%);
            color: white;
            display: flex;
            flex-direction: column;
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            overflow-y: auto;
        }

        .sidebar-header {
            padding: 1.5rem;
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .avatar-container {
            position: relative;
            width: 80px;
            height: 80px;
            margin: 0 auto 0.8rem;
        }

        .sidebar-avatar {
            width: 100%;
            height: 100%;
            background: var(--primary-gradient);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: white;
            border: 3px solid white;
            overflow: hidden;
        }

        .sidebar-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .change-avatar-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 0.3rem;
            border-radius: 0 0 40px 40px;
            font-size: 0.7rem;
            cursor: pointer;
            display: none;
        }

        .change-avatar-overlay.visible {
            display: block;
        }

        .user-info-card {
            padding: 1rem;
            background: rgba(255, 255, 255, 0.1);
            margin: 1rem;
            border-radius: 15px;
        }

        .user-info-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin: 0.5rem 0;
            font-size: 0.85rem;
        }

        .social-login {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.8rem;
            justify-content: center;
        }

        .social-btn {
            width: 40px;
            height: 40px;
            border: none;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            cursor: pointer;
            transition: var(--transition);
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .social-btn:hover {
            background: var(--primary-gradient);
            transform: translateY(-2px);
        }

        .chat-history {
            flex: 1;
            padding: 1rem;
            overflow-y: auto;
        }

        .chat-history h4 {
            padding: 0 0.5rem;
            margin-bottom: 0.8rem;
            color: #94a3b8;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .new-chat-btn {
            background: var(--primary-gradient);
            color: white;
            border: none;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.7rem;
            cursor: pointer;
            display: none;
            align-items: center;
            gap: 0.3rem;
        }

        .new-chat-btn.visible {
            display: flex;
        }

        .history-item {
            padding: 0.8rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            margin-bottom: 0.5rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .history-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .history-item .time {
            font-size: 0.65rem;
            color: #94a3b8;
        }

        .admin-chat-btn {
            margin: 1rem;
            padding: 0.8rem;
            background: var(--primary-gradient);
            border: none;
            border-radius: 12px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            font-size: 0.9rem;
        }

        /* Main Chat Area */
        .main-chat {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: #ffffff;
        }

        body.dark-mode .main-chat {
            background: #1e293b;
        }

        .chat-header {
            padding: 1rem 1.5rem;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-info {
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }

        .header-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: var(--primary-gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
            overflow: hidden;
        }

        .header-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .header-text h2 {
            font-size: 1.2rem;
            color: #2563eb;
            margin-bottom: 0.2rem;
        }

        .header-text p {
            color: #64748b;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .online-dot {
            width: 8px;
            height: 8px;
            background: #10b981;
            border-radius: 50%;
            display: inline-block;
        }

        .header-actions {
            display: flex;
            gap: 0.5rem;
        }

        .header-btn {
            padding: 0.4rem 1rem;
            border: none;
            border-radius: 30px;
            background: var(--primary-gradient);
            color: white;
            cursor: pointer;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        /* Messages Area */
        .messages-area {
            flex: 1;
            overflow-y: auto;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .message {
            max-width: 80%;
            padding: 0.8rem 1.2rem;
            border-radius: 15px;
            animation: messageIn 0.3s ease;
            line-height: 1.5;
            font-size: 0.95rem;
        }

        @keyframes messageIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .user-message {
            background: var(--primary-gradient);
            color: white;
            align-self: flex-end;
            border-bottom-right-radius: 5px;
        }

        .bot-message {
            background: #f1f5f9;
            color: #0f172a;
            align-self: flex-start;
            border-bottom-left-radius: 5px;
        }

        body.dark-mode .bot-message {
            background: #334155;
            color: white;
        }

        .thinking-badge {
            display: inline-block;
            padding: 0.2rem 0.8rem;
            border-radius: 30px;
            font-size: 0.65rem;
            font-weight: 600;
            margin-bottom: 0.3rem;
            background: rgba(255, 255, 255, 0.2);
            color: white;
        }

        .message-time {
            font-size: 0.65rem;
            margin-top: 0.3rem;
            opacity: 0.7;
            text-align: right;
        }

        /* Input Area */
        .input-area {
            padding: 1rem 1.5rem;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            border-top: 1px solid #e2e8f0;
        }

        .thinking-modes {
            display: flex;
            gap: 0.3rem;
            margin-bottom: 0.8rem;
            flex-wrap: wrap;
        }

        .mode-btn {
            padding: 0.3rem 1rem;
            border: 2px solid #e2e8f0;
            border-radius: 30px;
            background: white;
            color: #475569;
            cursor: pointer;
            font-size: 0.8rem;
            font-weight: 500;
        }

        body.dark-mode .mode-btn {
            background: #1e293b;
            border-color: #334155;
            color: #94a3b8;
        }

        .mode-btn.active {
            background: var(--primary-gradient);
            border-color: transparent;
            color: white;
        }

        .input-container {
            display: flex;
            gap: 0.8rem;
            align-items: flex-end;
        }

        .input-container textarea {
            flex: 1;
            padding: 0.8rem 1.2rem;
            border: 2px solid #e2e8f0;
            border-radius: 30px;
            resize: none;
            font-size: 0.9rem;
            max-height: 100px;
            background: white;
        }

        body.dark-mode .input-container textarea {
            background: #1e293b;
            border-color: #334155;
            color: white;
        }

        .input-container textarea:focus {
            outline: none;
            border-color: #2563eb;
        }

        .input-actions {
            display: flex;
            gap: 0.3rem;
        }

        .action-btn {
            width: 40px;
            height: 40px;
            border: none;
            border-radius: 50%;
            background: var(--primary-gradient);
            color: white;
            cursor: pointer;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .upload-preview {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 0.8rem;
            flex-wrap: wrap;
        }

        .preview-item {
            width: 50px;
            height: 50px;
            border-radius: 8px;
            overflow: hidden;
            position: relative;
            border: 2px solid #2563eb;
        }

        .preview-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .preview-item button {
            position: absolute;
            top: 2px;
            right: 2px;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            border: none;
            background: red;
            color: white;
            cursor: pointer;
            font-size: 10px;
        }

        .quick-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.8rem;
            flex-wrap: wrap;
        }

        .quick-action {
            padding: 0.3rem 1rem;
            border: none;
            border-radius: 30px;
            background: #f1f5f9;
            color: #475569;
            cursor: pointer;
            font-size: 0.8rem;
        }

        body.dark-mode .quick-action {
            background: #334155;
            color: #e2e8f0;
        }

        .quick-action:hover {
            background: var(--primary-gradient);
            color: white;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 25px;
            max-width: 350px;
            width: 90%;
        }

        body.dark-mode .modal-content {
            background: #1e293b;
            color: white;
        }

        .admin-messages {
            max-height: 250px;
            overflow-y: auto;
            margin: 1rem 0;
            padding: 0.8rem;
            background: #f1f5f9;
            border-radius: 12px;
        }

        .modal-input {
            width: 100%;
            padding: 0.8rem;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            margin: 0.8rem 0;
        }

        .typing-indicator {
            display: flex;
            gap: 0.3rem;
            padding: 0.8rem 1.2rem;
            background: #f1f5f9;
            border-radius: 20px;
            align-self: flex-start;
        }

        .typing-dot {
            width: 6px;
            height: 6px;
            background: #2563eb;
            border-radius: 50%;
            animation: typingBounce 1.4s infinite;
        }

        @keyframes typingBounce {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }

        /* Bottom Bar */
        .bottom-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 0.5rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9rem;
            z-index: 1000;
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                left: -280px;
                z-index: 100;
                height: 100%;
                transition: left 0.3s ease;
            }

            .sidebar.active {
                left: 0;
            }

            .message {
                max-width: 90%;
            }
        }
    </style>
</head>
<body>
    <!-- Top Bar -->
    <div class="top-bar">
        <div class="weather-info">
            <i>üå°Ô∏è</i>
            <span>32¬∞C N·∫Øng r·∫£i r√°c</span>
        </div>
        <div class="activate-windows">
            ‚öôÔ∏è Activate Windows - Go to Settings to activate Windows
        </div>
    </div>

    <!-- Key Container -->
    <div class="key-container" id="keyContainer">
        <div class="logo-container" id="mainLogoContainer">
            <div class="logo" id="mainLogo">
                <img src="https://via.placeholder.com/120/2563eb/ffffff?text=J" alt="JACK AI" id="mainLogoImg">
            </div>
        </div>
        <h1>JACK AI</h1>
        <h2>BY T·∫§N KHANG</h2>

        <div class="input-group">
            <input type="password" id="apiKey" placeholder="Nh·∫≠p OpenRouter API Key...">
        </div>

        <button class="btn" onclick="checkApiKey()">
            <span>üîç KI·ªÇM TRA KEY</span>
        </button>

        <div class="demo-text">
            <p>Nh·∫≠p m·∫≠t kh·∫©u 123 ƒë·ªÉ v√†o demo</p>
        </div>
    </div>

    <!-- Main Container -->
    <div class="main-container" id="mainContainer">
        <!-- Cover Image -->
        <div class="cover-image" id="coverImage">
            <button class="change-cover-btn" id="changeCoverBtn">
                <i>üì∑</i> ƒê·ªïi ·∫£nh b√¨a
            </button>
        </div>

        <div class="chat-interface">
            <!-- Sidebar -->
            <div class="sidebar" id="sidebar">
                <div class="sidebar-header">
                    <div class="avatar-container">
                        <div class="sidebar-avatar" id="sidebarAvatar">
                            <img src="https://via.placeholder.com/80/2563eb/ffffff?text=J" alt="JACK AI" id="sidebarAvatarImg">
                        </div>
                        <div class="change-avatar-overlay" id="changeAvatarBtn">
                            <i>üì∑</i> ƒê·ªïi avatar
                        </div>
                    </div>
                    <h3>JACK AI</h3>
                    <p>Si√™u tr√≠ tu·ªá nh√¢n t·∫°o</p>
                </div>

                <div class="user-info-card" id="userInfoCard">
                    <div class="user-info-item">
                        <i>üë§</i>
                        <span id="userName">Kh√°ch</span>
                    </div>
                    <div class="user-info-item">
                        <i>üìß</i>
                        <span id="userEmail">Ch∆∞a ƒëƒÉng nh·∫≠p</span>
                    </div>
                    <div class="user-info-item">
                        <i>üé≠</i>
                        <span id="userRole">Vai tr√≤: user</span>
                    </div>
                    
                    <div class="social-login" id="socialLogin">
                        <button class="social-btn" onclick="loginWithGoogle()" title="ƒêƒÉng nh·∫≠p Google">G</button>
                        <button class="social-btn" onclick="loginWithFacebook()" title="ƒêƒÉng nh·∫≠p Facebook">f</button>
                        <button class="social-btn" onclick="loginWithTwitter()" title="ƒêƒÉng nh·∫≠p Twitter">ùïè</button>
                    </div>
                </div>

                <div class="chat-history">
                    <div class="history-header">
                        <h4>üìú L·ªäCH S·ª¨ CHAT</h4>
                        <button class="new-chat-btn" id="newChatBtn" onclick="startNewChat()">
                            <i>‚ûï</i> New chat
                        </button>
                    </div>
                    <div id="chatHistoryList">
                        <!-- Chat history will be loaded here -->
                    </div>
                </div>

                <button class="admin-chat-btn" onclick="openAdminChat()">
                    <i>üí¨</i> NH·∫ÆN TIN V·ªöI ADMIN
                </button>
            </div>

            <!-- Main Chat Area -->
            <div class="main-chat">
                <div class="chat-header">
                    <div class="header-info">
                        <div class="header-avatar" id="headerAvatar">
                            <img src="https://via.placeholder.com/45/2563eb/ffffff?text=J" alt="JACK" id="headerAvatarImg">
                        </div>
                        <div class="header-text">
                            <h2>JACK N√® - Si√™u tr√≠ tu·ªá</h2>
                            <p>
                                <span class="online-dot"></span>
                                Online ‚Ä¢ S·∫µn s√†ng gi√∫p ƒë·ª° b·∫°n
                            </p>
                        </div>
                    </div>
                    <div class="header-actions">
                        <button class="header-btn" onclick="toggleSidebar()">‚ò∞ Menu</button>
                        <button class="header-btn" onclick="toggleTheme()" id="themeToggle">üåô Dark/Light</button>
                    </div>
                </div>

                <div class="messages-area" id="messagesArea">
                    <!-- Messages will be displayed here -->
                </div>

                <div class="input-area">
                    <!-- Thinking Modes -->
                    <div class="thinking-modes">
                        <button class="mode-btn active" onclick="setThinkingMode('fast')" id="fastMode">‚ö° Suy nghƒ© nhanh</button>
                        <button class="mode-btn" onclick="setThinkingMode('slow')" id="slowMode">üê¢ Suy nghƒ© ch·∫≠m</button>
                        <button class="mode-btn" onclick="setThinkingMode('deep')" id="deepMode">üß† Th√¥ng minh</button>
                    </div>

                    <!-- Upload Preview -->
                    <div class="upload-preview" id="uploadPreview"></div>

                    <!-- Input Container -->
                    <div class="input-container">
                        <textarea id="userInput" placeholder="Nh·∫≠p c√¢u h·ªèi c·ªßa b·∫°n... (Shift + Enter ƒë·ªÉ xu·ªëng d√≤ng)" rows="1"></textarea>
                        <div class="input-actions">
                            <button class="action-btn" onclick="uploadImage()" title="T·∫£i ·∫£nh l√™n">üì∑</button>
                            <button class="action-btn" onclick="uploadFile()" title="T·∫£i file l√™n">üìé</button>
                            <button class="action-btn" onclick="sendMessage()" title="G·ª≠i tin nh·∫Øn">üì§</button>
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div class="quick-actions">
                        <button class="quick-action" onclick="quickQuestion('Gi·∫£i b√†i t·∫≠p to√°n cao c·∫•p')">To√°n cao c·∫•p</button>
                        <button class="quick-action" onclick="quickQuestion('Gi·∫£i th√≠ch neural network')">Neural network</button>
                        <button class="quick-action" onclick="quickQuestion('Thuy·∫øt t∆∞∆°ng ƒë·ªëi l√† g√¨?')">Thuy·∫øt t∆∞∆°ng ƒë·ªëi</button>
                        <button class="quick-action" onclick="quickQuestion('L·ªô tr√¨nh h·ªçc ML')">L·ªô tr√¨nh ML</button>
                        <button class="quick-action" onclick="quickQuestion('So s√°nh c√°c m√¥ h√¨nh AI')">So s√°nh AI</button>
                        <button class="quick-action" onclick="quickQuestion('Vi·∫øt code Fibonacci')">Code Fibonacci</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Chat Modal -->
    <div class="modal" id="adminChatModal">
        <div class="modal-content">
            <h2>üí¨ Chat v·ªõi Admin</h2>
            <div class="admin-messages" id="adminMessages">
                <div class="message bot-message" style="max-width: 100%;">
                    <p>Ch√†o b·∫°n! B·∫°n c·∫ßn h·ªó tr·ª£ g√¨?</p>
                    <div class="message-time">H·ªá th·ªëng</div>
                </div>
            </div>
            <input type="text" id="adminMessageInput" class="modal-input" placeholder="Nh·∫≠p tin nh·∫Øn...">
            <button class="btn" onclick="sendAdminMessage()">G·ª≠i tin nh·∫Øn</button>
            <button class="btn" style="margin-top: 0.5rem; background: #6c757d;" onclick="closeAdminChat()">ƒê√≥ng</button>
        </div>
    </div>

    <!-- File Inputs -->
    <input type="file" id="avatarInput" accept="image/*" style="display: none;">
    <input type="file" id="coverInput" accept="image/*" style="display: none;">

    <!-- Bottom Bar -->
    <div class="bottom-bar">
        <div class="weather-info">
            <i>üå°Ô∏è</i>
            <span>32¬∞C N·∫Øng r·∫£i r√°c</span>
        </div>
        <div class="activate-windows">
            ‚öôÔ∏è Activate Windows - Go to Settings to activate Windows
        </div>
    </div>

    <script>
        // Global variables
        let apiKey = '';
        let isDemo = false;
        let currentUser = null;
        let isAdmin = false;
        let currentThinkingMode = 'fast';
        let chatHistory = JSON.parse(localStorage.getItem('chatHistory') || '[]');
        let uploadedFiles = [];
        let currentChatId = null;

        // Admin email
        const ADMIN_EMAIL = 'kl5823633@gmail.com';

        // Avatar storage
        let jackAvatar = localStorage.getItem('jackAvatar') || 'https://via.placeholder.com/120/2563eb/ffffff?text=J';
        let jackCover = localStorage.getItem('jackCover') || '';

        // Initialize avatars
        function initializeAvatars() {
            const avatarElements = [
                document.getElementById('mainLogoImg'),
                document.getElementById('sidebarAvatarImg'),
                document.getElementById('headerAvatarImg')
            ];
            
            avatarElements.forEach(img => {
                if (img) img.src = jackAvatar;
            });

            if (jackCover) {
                document.getElementById('coverImage').style.background = `url('${jackCover}') center/cover`;
            } else {
                document.getElementById('coverImage').style.background = 'var(--primary-gradient)';
            }
        }

        // Check API Key
        function checkApiKey() {
            const key = document.getElementById('apiKey').value;
            
            if (key === '123') {
                isDemo = true;
                apiKey = 'demo';
                showNotification('‚úÖ ƒêƒÉng nh·∫≠p demo th√†nh c√¥ng!', 'success');
                enterChat();
                return;
            }
            
            if (key.startsWith('sk-') || key.includes('openrouter')) {
                apiKey = key;
                showNotification('‚úÖ ƒêang k·∫øt n·ªëi v·ªõi API...', 'info');
                enterChat();
            } else {
                showNotification('‚ùå API Key kh√¥ng h·ª£p l·ªá!', 'error');
            }
        }

        // Enter chat
        function enterChat() {
            document.getElementById('keyContainer').style.display = 'none';
            document.getElementById('mainContainer').style.display = 'block';
            
            initializeAvatars();
            
            const messagesArea = document.getElementById('messagesArea');
            
            if (isDemo) {
                messagesArea.innerHTML = `
                    <div class="message bot-message">
                        <span class="thinking-badge">üéâ DEMO MODE</span>
                        <p>Xin ch√†o! T√¥i l√† JACK AI - Si√™u tr√≠ tu·ªá nh√¢n t·∫°o do ƒë·ªôi ng≈© c·ªßa T·∫§N KHANG ph√°t tri·ªÉn v√† ho√†n th√†nh. C·∫£m ∆°n b·∫°n ƒë√£ truy c·∫≠p v√†o demo!</p>
                        <div class="message-time">${new Date().toLocaleTimeString()}</div>
                    </div>
                `;
            } else {
                messagesArea.innerHTML = `
                    <div class="message bot-message">
                        <span class="thinking-badge">üöÄ JACK AI</span>
                        <p>Xin ch√†o! T√¥i l√† JACK AI - Si√™u tr√≠ tu·ªá nh√¢n t·∫°o. T√¥i ƒë√£ s·∫µn s√†ng gi√∫p ƒë·ª° b·∫°n!</p>
                        <div class="message-time">${new Date().toLocaleTimeString()}</div>
                    </div>
                `;
            }
            
            loadChatHistory();
        }

        // Set thinking mode
        function setThinkingMode(mode) {
            currentThinkingMode = mode;
            
            document.getElementById('fastMode').classList.remove('active');
            document.getElementById('slowMode').classList.remove('active');
            document.getElementById('deepMode').classList.remove('active');
            
            if (mode === 'fast') {
                document.getElementById('fastMode').classList.add('active');
            } else if (mode === 'slow') {
                document.getElementById('slowMode').classList.add('active');
            } else {
                document.getElementById('deepMode').classList.add('active');
            }
        }

        // Send message
        async function sendMessage() {
            const input = document.getElementById('userInput');
            const message = input.value.trim();
            
            if (!message && uploadedFiles.length === 0) return;

            // Add user message
            addMessage(message, 'user');
            input.value = '';

            // Show typing indicator
            showTypingIndicator();

            // Get response
            setTimeout(() => {
                removeTypingIndicator();
                
                let response;
                if (isDemo) {
                    response = getDemoResponse(message);
                } else {
                    response = "T√¥i l√† JACK AI - T√¥i ƒë√£ nh·∫≠n ƒë∆∞·ª£c tin nh·∫Øn c·ªßa b·∫°n. Trong phi√™n b·∫£n ƒë·∫ßy ƒë·ªß, t√¥i s·∫Ω k·∫øt n·ªëi v·ªõi OpenRouter API ƒë·ªÉ tr·∫£ l·ªùi!";
                }
                
                addMessage(response, 'bot', currentThinkingMode);
                saveToHistory(message, response);
            }, 1000);
        }

        // Get demo response
        function getDemoResponse(prompt) {
            if (prompt.toLowerCase().includes('to√°n')) {
                return `ƒê·ªÉ gi·∫£i b√†i to√°n n√†y, ch√∫ng ta √°p d·ª•ng c√¥ng th·ª©c:

1. ƒê·∫°o h√†m: f'(x) = lim(h‚Üí0) [f(x+h) - f(x)]/h
2. T√≠ch ph√¢n: ‚à´f(x)dx = F(x) + C

B·∫°n c·∫ßn gi·∫£i b√†i to√°n c·ª• th·ªÉ n√†o?`;
            }
            if (prompt.toLowerCase().includes('neural')) {
                return 'Neural Network l√† m√¥ h√¨nh h·ªçc s√¢u l·∫•y c·∫£m h·ª©ng t·ª´ n√£o b·ªô. G·ªìm Input layer, Hidden layers, Output layer v·ªõi c√°c activation function nh∆∞ ReLU, Sigmoid.';
            }
            if (prompt.toLowerCase().includes('t∆∞∆°ng ƒë·ªëi')) {
                return 'Thuy·∫øt t∆∞∆°ng ƒë·ªëi c·ªßa Einstein:\n‚Ä¢ H·∫πp (1905): E = mc¬≤\n‚Ä¢ R·ªông (1915): L·ª±c h·∫•p d·∫´n l√† ƒë·ªô cong kh√¥ng-th·ªùi gian';
            }
            if (prompt.toLowerCase().includes('fibonacci')) {
                return `Code Fibonacci:

Python:
\`\`\`python
def fibonacci(n):
    if n <= 1: return n
    return fibonacci(n-1) + fibonacci(n-2)
\`\`\`

JavaScript:
\`\`\`javascript
const fibonacci = n => n <= 1 ? n : fibonacci(n-1) + fibonacci(n-2);
\`\`\``;
            }
            return 'T√¥i l√† JACK AI - T√¥i c√≥ th·ªÉ gi√∫p b·∫°n gi·∫£i b√†i t·∫≠p, vi·∫øt code, gi·∫£i th√≠ch AI/ML. B·∫°n c·∫ßn g√¨?';
        }

        // Add message
        function addMessage(content, sender, mode = 'fast') {
            const messagesArea = document.getElementById('messagesArea');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender === 'user' ? 'user-message' : 'bot-message'}`;
            
            let badgeText = '';
            if (sender === 'bot') {
                if (mode === 'fast') badgeText = '‚ö° Suy nghƒ© nhanh';
                else if (mode === 'slow') badgeText = 'üê¢ Suy nghƒ© ch·∫≠m';
                else badgeText = 'üß† Th√¥ng minh';
            }
            
            messageDiv.innerHTML = `
                ${sender === 'bot' ? `<span class="thinking-badge">${badgeText}</span>` : ''}
                <p>${content.replace(/\n/g, '<br>')}</p>
                <div class="message-time">${new Date().toLocaleTimeString()}</div>
            `;
            
            messagesArea.appendChild(messageDiv);
            messagesArea.scrollTop = messagesArea.scrollHeight;
        }

        // Show typing indicator
        function showTypingIndicator() {
            const messagesArea = document.getElementById('messagesArea');
            const indicator = document.createElement('div');
            indicator.className = 'typing-indicator';
            indicator.id = 'typingIndicator';
            indicator.innerHTML = `
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
            `;
            messagesArea.appendChild(indicator);
            messagesArea.scrollTop = messagesArea.scrollHeight;
        }

        // Remove typing indicator
        function removeTypingIndicator() {
            const indicator = document.getElementById('typingIndicator');
            if (indicator) indicator.remove();
        }

        // Upload image
        function uploadImage() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'image/*';
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(readerEvent) {
                        addImagePreview(readerEvent.target.result);
                        uploadedFiles.push({ name: file.name, data: readerEvent.target.result, type: 'image' });
                        showNotification(`üì∑ ƒê√£ t·∫£i ·∫£nh: ${file.name}`, 'success');
                    };
                    reader.readAsDataURL(file);
                }
            };
            input.click();
        }

        // Upload file
        function uploadFile() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.pdf,.doc,.docx,.txt,.js,.py';
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (file) {
                    uploadedFiles.push({ name: file.name, type: 'file' });
                    showNotification(`üìé ƒê√£ t·∫£i: ${file.name}`, 'success');
                    document.getElementById('userInput').value += `[File: ${file.name}] `;
                }
            };
            input.click();
        }

        // Add image preview
        function addImagePreview(src) {
            const preview = document.getElementById('uploadPreview');
            const item = document.createElement('div');
            item.className = 'preview-item';
            item.innerHTML = `<img src="${src}"><button onclick="this.parentElement.remove()">√ó</button>`;
            preview.appendChild(item);
        }

        // Quick question
        function quickQuestion(question) {
            document.getElementById('userInput').value = question;
            sendMessage();
        }

        // Save to history
        function saveToHistory(question, answer) {
            if (!currentUser) return;
            
            const history = {
                id: Date.now(),
                question: question.substring(0, 30) + (question.length > 30 ? '...' : ''),
                time: new Date().toLocaleString(),
                messages: [{ role: 'user', content: question }, { role: 'assistant', content: answer }]
            };
            
            chatHistory.unshift(history);
            if (chatHistory.length > 20) chatHistory.pop();
            
            localStorage.setItem(`chatHistory_${currentUser.email}`, JSON.stringify(chatHistory));
            loadChatHistory();
        }

        // Load chat history
        function loadChatHistory() {
            if (!currentUser) return;
            
            const saved = localStorage.getItem(`chatHistory_${currentUser.email}`);
            chatHistory = saved ? JSON.parse(saved) : [];
            
            const historyList = document.getElementById('chatHistoryList');
            historyList.innerHTML = '';
            
            chatHistory.forEach(chat => {
                const item = document.createElement('div');
                item.className = 'history-item';
                item.onclick = () => loadChat(chat.id);
                item.innerHTML = `
                    <div>${chat.question}</div>
                    <div class="time">${chat.time}</div>
                `;
                historyList.appendChild(item);
            });
        }

        // Load chat
        function loadChat(chatId) {
            const chat = chatHistory.find(c => c.id === chatId);
            if (chat) {
                const messagesArea = document.getElementById('messagesArea');
                messagesArea.innerHTML = '';
                chat.messages.forEach(msg => {
                    addMessage(msg.content, msg.role === 'user' ? 'user' : 'bot');
                });
            }
        }

        // Start new chat
        function startNewChat() {
            document.getElementById('messagesArea').innerHTML = `
                <div class="message bot-message">
                    <p>Xin ch√†o! T√¥i l√† JACK AI - T√¥i c√≥ th·ªÉ gi√∫p g√¨ cho b·∫°n?</p>
                    <div class="message-time">${new Date().toLocaleTimeString()}</div>
                </div>
            `;
        }

        // Login functions
        function loginWithGoogle() {
            const email = prompt('Nh·∫≠p email Google:');
            if (email) {
                currentUser = {
                    name: email.split('@')[0],
                    email: email
                };
                
                isAdmin = (email === ADMIN_EMAIL);
                
                // Update UI
                document.getElementById('userName').textContent = currentUser.name;
                document.getElementById('userEmail').textContent = currentUser.email;
                document.getElementById('userRole').textContent = `Vai tr√≤: ${isAdmin ? 'admin' : 'user'}`;
                
                // Hide social login buttons
                document.getElementById('socialLogin').style.display = 'none';
                
                // Show new chat button
                document.getElementById('newChatBtn').classList.add('visible');
                
                // Show admin controls if admin
                if (isAdmin) {
                    document.getElementById('changeAvatarBtn').classList.add('visible');
                    document.getElementById('changeCoverBtn').classList.add('visible');
                }
                
                // Load user's chat history
                loadChatHistory();
                
                showNotification(`‚úÖ ƒêƒÉng nh·∫≠p th√†nh c√¥ng v·ªõi ${email}`, 'success');
            }
        }

        function loginWithFacebook() {
            showNotification('üîú T√≠nh nƒÉng ƒëang ph√°t tri·ªÉn', 'info');
        }

        function loginWithTwitter() {
            showNotification('üîú T√≠nh nƒÉng ƒëang ph√°t tri·ªÉn', 'info');
        }

        // Change avatar
        function changeAvatar() {
            if (!isAdmin) {
                showNotification('‚ùå Ch·ªâ admin m·ªõi ƒë∆∞·ª£c ƒë·ªïi avatar!', 'error');
                return;
            }
            
            const input = document.getElementById('avatarInput');
            input.click();
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(readerEvent) {
                        const url = readerEvent.target.result;
                        
                        document.getElementById('mainLogoImg').src = url;
                        document.getElementById('sidebarAvatarImg').src = url;
                        document.getElementById('headerAvatarImg').src = url;
                        
                        localStorage.setItem('jackAvatar', url);
                        jackAvatar = url;
                        
                        showNotification('‚úÖ ƒê√£ c·∫≠p nh·∫≠t avatar!', 'success');
                    };
                    reader.readAsDataURL(file);
                }
            };
        }

        // Change cover
        function changeCover() {
            if (!isAdmin) {
                showNotification('‚ùå Ch·ªâ admin m·ªõi ƒë∆∞·ª£c ƒë·ªïi ·∫£nh b√¨a!', 'error');
                return;
            }
            
            const input = document.getElementById('coverInput');
            input.click();
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(readerEvent) {
                        const url = readerEvent.target.result;
                        
                        document.getElementById('coverImage').style.background = `url('${url}') center/cover`;
                        localStorage.setItem('jackCover', url);
                        jackCover = url;
                        
                        showNotification('‚úÖ ƒê√£ c·∫≠p nh·∫≠t ·∫£nh b√¨a!', 'success');
                    };
                    reader.readAsDataURL(file);
                }
            };
        }

        // Admin chat
        function openAdminChat() {
            document.getElementById('adminChatModal').classList.add('active');
        }

        function closeAdminChat() {
            document.getElementById('adminChatModal').classList.remove('active');
        }

        function sendAdminMessage() {
            const input = document.getElementById('adminMessageInput');
            const message = input.value.trim();
            
            if (message) {
                const adminMessages = document.getElementById('adminMessages');
                
                const userMsg = document.createElement('div');
                userMsg.className = 'message user-message';
                userMsg.style.maxWidth = '100%';
                userMsg.innerHTML = `<p>${message}</p><div class="message-time">${new Date().toLocaleTimeString()}</div>`;
                adminMessages.appendChild(userMsg);
                
                setTimeout(() => {
                    const reply = document.createElement('div');
                    reply.className = 'message bot-message';
                    reply.style.maxWidth = '100%';
                    reply.innerHTML = `<p>Admin s·∫Ω ph·∫£n h·ªìi s·ªõm!</p><div class="message-time">${new Date().toLocaleTimeString()}</div>`;
                    adminMessages.appendChild(reply);
                    adminMessages.scrollTop = adminMessages.scrollHeight;
                }, 1000);
                
                input.value = '';
                adminMessages.scrollTop = adminMessages.scrollHeight;
            }
        }

        // Toggle theme
        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
            const toggle = document.getElementById('themeToggle');
            toggle.innerHTML = document.body.classList.contains('dark-mode') ? '‚òÄÔ∏è Dark/Light' : 'üåô Dark/Light';
        }

        // Toggle sidebar
        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('active');
        }

        // Show notification
        function showNotification(message, type) {
            const notif = document.createElement('div');
            notif.style.cssText = `
                position: fixed;
                top: 70px;
                right: 20px;
                padding: 0.8rem 1.5rem;
                background: ${type === 'success' ? '#10b981' : type === 'error' ? '#ef4444' : '#3b82f6'};
                color: white;
                border-radius: 10px;
                z-index: 3000;
                animation: slideIn 0.3s;
            `;
            notif.textContent = message;
            document.body.appendChild(notif);
            setTimeout(() => notif.remove(), 3000);
        }

        // Event listeners
        document.getElementById('userInput').addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        document.getElementById('changeAvatarBtn').addEventListener('click', changeAvatar);
        document.getElementById('changeCoverBtn').addEventListener('click', changeCover);

        // Initialize
        window.onload = function() {
            if (localStorage.getItem('theme') === 'dark') {
                document.body.classList.add('dark-mode');
                document.getElementById('themeToggle').innerHTML = '‚òÄÔ∏è Dark/Light';
            }
        };
    </script>
</body>
</html>
